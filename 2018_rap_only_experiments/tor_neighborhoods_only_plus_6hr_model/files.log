$ ruby make_grib_file_list.rb > tor_neighborhoods_only_plus_6hr_model/train.txt
Start year?
2014
Start month?
2
Start day?
26
End year?
2016
End month?
12
End day?
31
Forcast hour (2-18)?
6
Only hours with tornadoes (n/y)?
y
Dev ratio [0.0-1.0]?
0
Test ratio [0.0-1.0]?
0
Subsample ratio [0.0-1.0]? (non-deterministic)
1.0
1658/1658 hours with tornadoes

(need to manually remove headers)

$ ruby make_grib_file_list.rb
Start year?
2017
Start month?
1
Start day?
1
End year?
2017
End month?
12
End day?
31
Forcast hour (2-18)?
6
Only hours with tornadoes (n/y)?
y
Dev ratio [0.0-1.0]?
0.25
Test ratio [0.0-1.0]?
0.25
Subsample ratio [0.0-1.0]? (non-deterministic)
1.0

$ ruby make_grib_file_list.rb
Start year?
2017
Start month?
1
Start day?
1
End year?
2017
End month?
12
End day?
31
Forcast hour (2-18)?
6
Only hours with tornadoes (n/y)?
y
Dev ratio [0.0-1.0]?
0.25
Test ratio [0.0-1.0]?
0.25
Subsample ratio [0.0-1.0]? (non-deterministic)
1.0
# Dev Files
...

# Test Files
...

# Training Files
...

685/685 hours with tornadoes


(make dev.txt/test.txt files manually)
(add training files manually)

So training is 2014-2-26 through 2016 and half the tornado days in 2017.

julia MakeTornadoNeighborhoodsData.jl tor_neighborhoods_only_plus_6hr_model/dev.txt


julia MakeTornadoNeighborhoodsData.jl tor_neighborhoods_only_plus_6hr_model/train.txt


julia TrainGBM.jl tor_neighborhoods_only_plus_6hr_model/lightgbm.jl # LightGBM doesn't need the points shuffled


$ ruby read_lightgbm_feature_importance.rb tor_neighborhoods_only_plus_6hr_model/lightgbm_loss_0.0669989.model
44	HGT:convective cloud top level:25mi mean
34	CAPE:90-0 mb above ground:25mi mean -1hr
30	LFTX:500-1000 mb:25mi mean
30	CAPE:90-0 mb above ground:point -1hr
29	HLCY:3000-0 m above ground:25mi mean
28	HLCY:1000-0 m above ground:25mi mean
26	HLCY:3000-0 m above ground:25mi mean -1hr
23	LTNG:surface:25mi mean
22	CAPE:90-0 mb above ground:25mi mean
20	4LFTX:180-0 mb above ground:25mi mean storm location -1hr
19	HLCY:3000-0 m above ground:25mi mean storm location -1hr
19	HGT:surface:25mi mean storm location -1hr
19	4LFTX:180-0 mb above ground:25mi mean
17	PRES:surface:25mi mean storm location -1hr
17	HGT:convective cloud top level:25mi mean storm location -1hr
16	CAPE:90-0 mb above ground:25mi mean storm location -1hr
16	RH:700 mb:25mi mean
15	LFTX:500-1000 mb:point
15	PLPL:255-0 mb above ground:25mi mean storm location -1hr
14	PLPL:255-0 mb above ground:25mi mean -1hr
14	PLPL:255-0 mb above ground:25mi mean
13	RH:675 mb:25mi mean
13	RVCSH:shear magnitude 1/s 6000-0 m above ground:25mi mean storm location -1hr
13	RH:725 mb:25mi mean
12	RGRD:speed m/s 625 mb:25mi mean
12	LFTX:500-1000 mb:25mi mean storm location -1hr
12	RETOP:entire atmosphere (considered as a single layer):25mi mean
12	4LFTX:180-0 mb above ground:point
12	TMP:100 mb:25mi mean
12	HGT:surface:25mi mean


# Slowed down the learning rate

  LightGBM.LGBMBinary(
    num_iterations = 1000,
    min_data_in_leaf = 1000, # 1000 did better than 2000 or 5000, 500 is too small
    # min_sum_hessian_in_leaf = 1000,
    learning_rate = .07, # .07 did better than .1 (0.0668413 vs 0.0669989)
    early_stopping_round = 15,
    feature_fraction = .8,
    bagging_fraction = .8, # .25 + bag_freq 2 is too small but fast, .7 + bag_freq 5 is too small, .9 + bag_freq 5 is too large
    bagging_freq = 5,
    num_leaves = 31, # 15 is too small, 63 is too much
    is_sparse = false,
    max_bin = 255,
    num_threads = 4,
    is_unbalance = false, # if true, changes the label weights so pos/neg classes have same total weight across dataset when computing loss/gradient; causes WAAY too much probability all over
    metric = ["binary_logloss"]
  )


$ ruby read_lightgbm_feature_importance.rb tor_neighborhoods_only_plus_6hr_model/lightgbm_loss_0.0668413.model
73	HGT:convective cloud top level:25mi mean
55	LFTX:500-1000 mb:25mi mean
53	CAPE:90-0 mb above ground:25mi mean -1hr
47	HLCY:1000-0 m above ground:25mi mean
45	CAPE:90-0 mb above ground:25mi mean
43	HLCY:3000-0 m above ground:25mi mean
38	CAPE:90-0 mb above ground:point -1hr
36	HLCY:3000-0 m above ground:25mi mean -1hr
35	4LFTX:180-0 mb above ground:25mi mean storm location -1hr
34	LTNG:surface:25mi mean
30	CAPE:90-0 mb above ground:25mi mean storm location -1hr
30	4LFTX:180-0 mb above ground:25mi mean
30	TMP:100 mb:25mi mean
29	RH:700 mb:25mi mean
29	HGT:surface:25mi mean storm location -1hr
28	PLPL:255-0 mb above ground:25mi mean -1hr
26	HGT:convective cloud top level:25mi mean storm location -1hr
26	PLPL:255-0 mb above ground:25mi mean
26	PRES:surface:25mi mean storm location -1hr
25	HLCY:3000-0 m above ground:25mi mean storm location -1hr
24	TMP:100 mb:25mi mean storm location -1hr
24	LFTX:500-1000 mb:point
23	PWAT:entire atmosphere (considered as a single layer):25mi mean
22	RH:150 mb:25mi mean storm location -1hr
22	RVCSH:shear magnitude 1/s 6000-0 m above ground:25mi mean storm location -1hr
22	RH:725 mb:25mi mean
22	LFTX:500-1000 mb:25mi mean storm location -1hr
21	RH:675 mb:25mi mean
21	PRES:80 m above ground:25mi mean storm location -1hr
21	CIN:90-0 mb above ground:25mi mean
